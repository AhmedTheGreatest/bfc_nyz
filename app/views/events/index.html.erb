<section class="container mx-auto px-4 py-16">
  <div class="text-center mb-12">
    <h1 class="text-4xl font-bold">Events Gallery</h1>
    <p class="text-gray-600 mt-2">Photos and highlights from BFC events</p>
  </div>

  <% if Current.user&.admin? %>
    <div class="text-center mb-6">
      <%= link_to "New Event", new_event_path, class: "btn btn-primary" %>
    </div>
  <% end %>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <% @events.each do |event| %>
      <div class="card bg-base-100 shadow hover:shadow-md transition-all duration-300">
        <%= link_to event_path(event) do %>
          <% if event.photos.attached? %>
            <%= image_tag event.photos.first.variant(resize_to_limit: [400, 300]), class: "w-full h-48 object-cover rounded-t-md" %>
          <% end %>
          <div class="card-body">
            <h2 class="text-xl font-semibold"><%= event.title %></h2>
            <p class="text-gray-500"><%= event.date.strftime("%d %B %Y") if event.date %></p>
          </div>
        <% end %>

        <% if Current.user&.admin? %>
          <div class="card-actions justify-end p-3">
            <%= link_to "Edit", edit_event_path(event), class: "btn btn-sm btn-primary btn-outline" %>
            <%= button_to "Delete", event_path(event),
                        method: :delete,
                        class: "btn btn-sm btn-error btn-outline" %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>

  <% if @events.empty? %>
    <p class="text-center text-gray-500 mt-6">No events yet.</p>
  <% end %>
</section>
