<section class="container mx-auto px-4 py-16">
  <!-- Page Heading -->
  <div class="text-center mb-12">
    <h1 class="text-4xl sm:text-5xl font-bold mb-4">Announcements</h1>
    <p class="text-gray-600 text-lg">
      Latest updates and important notices from BFC
    </p>

    <% if Current.user&.admin? %>
      <div class="mt-4">
        <%= link_to "New Announcement", new_announcement_path, class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>

  <!-- Announcements List -->
  <div class="max-w-4xl mx-auto space-y-6">
    <% @announcements.each do |announcement| %>
      <div class="card bg-base-100 shadow-sm hover:shadow-md transition-all duration-300 border-l-4 border-primary">
        <div class="card-body">
          <div class="flex items-start justify-between gap-4">
            <%= link_to announcement_path(announcement), class: "flex-1" do %>
              <h2 class="text-xl font-semibold hover:underline">
                <%= announcement.title %>
              </h2>
              <p class="text-gray-600 mt-2 line-clamp-2">
                <%= truncate(announcement.body.to_plain_text, length: 160) %>
              </p>
            <% end %>

            <% if announcement.pinned? %>
              <span class="badge badge-primary badge-outline">
                ðŸ“Œ Pinned
              </span>
            <% end %>
          </div>

          <div class="mt-4 flex justify-between items-center text-sm text-gray-500">
            <span>Posted on <%= announcement.created_at.strftime("%d %B %Y") %></span>

            <% if Current.user&.admin? %>
              <div class="flex gap-2">
                <%= link_to "Edit", edit_announcement_path(announcement),
                            class: "btn btn-sm btn-outline btn-primary" %>
                <%= button_to "Delete", announcement_path(announcement),
                            method: :delete,
                            class: "btn btn-sm btn-outline btn-error" %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>

    <% if @announcements.empty? %>
      <p class="text-center text-gray-500">
        No announcements at the moment.
      </p>
    <% end %>
  </div>
</section>
